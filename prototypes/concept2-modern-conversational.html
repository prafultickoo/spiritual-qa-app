<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üïâÔ∏è Spiritual Wisdom - Modern Interface</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #fafafa;
            color: #1a1a1a;
            overflow: hidden;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.6s ease-out;
        }

        .loading-content {
            text-align: center;
        }

        .om-symbol {
            font-size: 72px;
            margin-bottom: 24px;
            animation: breathe 3s ease-in-out infinite;
        }

        .loading-text {
            font-size: 16px;
            color: #64748b;
            font-weight: 500;
            margin-bottom: 32px;
        }

        .loading-progress {
            width: 200px;
            height: 2px;
            background: #e2e8f0;
            border-radius: 1px;
            overflow: hidden;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #6366f1);
            width: 0;
            animation: loading 2s ease-out forwards;
            border-radius: 1px;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        @keyframes loading {
            to { width: 100%; }
        }

        /* Main App */
        .app {
            display: none;
            height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            position: relative;
        }

        /* Header */
        .header {
            height: 64px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .settings-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: #f8fafc;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 16px;
        }

        .settings-btn:hover {
            background: #f1f5f9;
            transform: translateY(-1px);
        }

        /* Reading Style Selector - Minimal Tabs */
        .reading-styles {
            height: 48px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            align-items: center;
            padding: 0 24px;
            background: #fcfcfc;
        }

        .style-tabs {
            display: flex;
            gap: 0;
            background: #f8fafc;
            border-radius: 8px;
            padding: 4px;
        }

        .style-tab {
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            background: transparent;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .style-tab.active {
            background: white;
            color: #1a1a1a;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Chat Area */
        .chat-container {
            height: calc(100vh - 64px - 48px - 80px);
            display: flex;
            flex-direction: column;
        }

        .messages-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px 24px;
            scroll-behavior: smooth;
        }

        /* Messages */
        .message {
            display: flex;
            margin-bottom: 24px;
            align-items: flex-start;
            gap: 12px;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.user .message-content {
            background: #1a1a1a;
            color: white;
            margin-left: 64px;
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message.bot .message-content {
            background: #f8fafc;
            color: #1a1a1a;
            margin-right: 64px;
            border: 1px solid #f1f5f9;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .user-avatar {
            background: #1a1a1a;
            color: white;
            order: 1;
        }

        .bot-avatar {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: #64748b;
        }

        .message-content {
            max-width: 100%;
            padding: 16px 20px;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.6;
            position: relative;
        }

        .message.user .message-content {
            border-radius: 12px 12px 4px 12px;
        }

        .message.bot .message-content {
            border-radius: 12px 12px 12px 4px;
        }

        .om-greeting {
            font-weight: 600;
            color: #3b82f6;
        }

        .message-time {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 8px;
        }

        /* Input Area */
        .input-area {
            height: 80px;
            border-top: 1px solid #f1f5f9;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
        }

        .input-container {
            position: relative;
            max-width: 100%;
        }

        .message-input {
            width: 100%;
            min-height: 48px;
            max-height: 120px;
            padding: 12px 52px 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            font-family: inherit;
            font-size: 15px;
            line-height: 1.4;
            resize: none;
            outline: none;
            transition: all 0.2s ease;
            background: white;
        }

        .message-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .message-input::placeholder {
            color: #94a3b8;
        }

        .send-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            border: none;
            background: #3b82f6;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 16px;
        }

        .send-button:hover {
            background: #2563eb;
            transform: translateY(-50%) scale(1.05);
        }

        .send-button:disabled {
            background: #e2e8f0;
            cursor: not-allowed;
            transform: translateY(-50%) scale(1);
        }

        /* Settings Sidebar */
        .settings-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            border-left: 1px solid #e2e8f0;
            transition: right 0.3s ease;
            z-index: 50;
            overflow-y: auto;
        }

        .settings-sidebar.open {
            right: 0;
        }

        .settings-header {
            height: 64px;
            padding: 0 24px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fcfcfc;
        }

        .settings-title {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .close-settings {
            width: 32px;
            height: 32px;
            border: none;
            background: #f8fafc;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #64748b;
        }

        .settings-content {
            padding: 24px;
        }

        .setting-group {
            margin-bottom: 24px;
        }

        .setting-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }

        .setting-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: #1a1a1a;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .setting-select:focus {
            border-color: #3b82f6;
        }

        .setting-help {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
            line-height: 1.4;
        }

        .slider-container {
            margin-top: 8px;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #f1f5f9;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .slider-value {
            font-size: 12px;
            color: #3b82f6;
            font-weight: 600;
            margin-top: 4px;
        }

        /* Reasoning Effort (for o3-mini) */
        .reasoning-effort-group {
            display: none;
        }

        .reasoning-effort-group.visible {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 0 16px;
            }

            .reading-styles {
                padding: 0 16px;
            }

            .messages-area {
                padding: 24px 16px;
            }

            .input-area {
                padding: 16px;
            }

            .message.user .message-content {
                margin-left: 32px;
            }

            .message.bot .message-content {
                margin-right: 32px;
            }

            .settings-sidebar {
                width: 100vw;
                right: -100vw;
            }
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #f1f5f9;
            margin-right: 64px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #94a3b8;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0.0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }

        /* Welcome Message */
        .welcome-message {
            text-align: center;
            padding: 48px 24px;
            color: #64748b;
        }

        .welcome-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.7;
        }

        .welcome-title {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            font-size: 15px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="om-symbol">üïâÔ∏è</div>
            <div class="loading-text">Connecting to Divine Wisdom...</div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app">
        <!-- Header -->
        <div class="header">
            <div class="logo-section">
                <div class="logo">üïâÔ∏è Spiritual Wisdom</div>
                <div class="status-indicator"></div>
            </div>
            <div class="header-actions">
                <button class="settings-btn" id="settings-btn">‚öôÔ∏è</button>
            </div>
        </div>

        <!-- Reading Style Selector -->
        <div class="reading-styles">
            <div class="style-tabs">
                <button class="style-tab" data-style="deep">üîç Deep</button>
                <button class="style-tab active" data-style="balanced">‚öñÔ∏è Balanced</button>
                <button class="style-tab" data-style="practical">üéØ Practical</button>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="messages-area" id="messages-area">
                <!-- Welcome Message -->
                <div class="welcome-message">
                    <div class="welcome-icon">üïâÔ∏è</div>
                    <div class="welcome-title">Welcome to Spiritual Wisdom</div>
                    <div class="welcome-subtitle">Your AI guide for spiritual questions and ancient wisdom.<br>Ask anything about life, dharma, meditation, or spiritual growth.</div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <textarea 
                        id="message-input" 
                        class="message-input" 
                        placeholder="Ask your spiritual question..."
                        rows="1"
                    ></textarea>
                    <button id="send-button" class="send-button">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Sidebar -->
    <div id="settings-sidebar" class="settings-sidebar">
        <div class="settings-header">
            <div class="settings-title">Settings</div>
            <button id="close-settings" class="close-settings">√ó</button>
        </div>
        
        <div class="settings-content">
            <div class="setting-group">
                <label class="setting-label">AI Model</label>
                <select id="model-select" class="setting-select">
                    <option value="gpt-4.1">GPT-4.1</option>
                    <option value="gpt-4o">GPT-4o</option>
                    <option value="o3-mini">o3 mini (Reasoning) üß†</option>
                    <option value="claude-3-opus">Claude 3 Opus</option>
                </select>
            </div>

            <div class="setting-group reasoning-effort-group" id="reasoning-effort-group">
                <label class="setting-label">Reasoning Effort</label>
                <select id="reasoning-effort-select" class="setting-select">
                    <option value="low">üöÄ Low (Fast)</option>
                    <option value="medium" selected>‚öñÔ∏è Medium (Balanced)</option>
                    <option value="high">üß† High (Deep Thinking)</option>
                </select>
                <div class="setting-help">Higher reasoning effort provides more thorough analysis but takes longer.</div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Processing Method (RAG Technique)</label>
                <select id="rag-technique-select" class="setting-select">
                    <option value="stuff" selected>üì¶ Stuff (Fast & Cheap)</option>
                    <option value="refine">üîÑ Refine (High Quality)</option>
                    <option value="map_reduce">üó∫Ô∏è Map-Reduce (Parallel)</option>
                    <option value="map_rerank">üèÜ Map-Rerank (Best Answer)</option>
                    <option value="selective">üéØ Selective (Smart)</option>
                </select>
                <div class="setting-help">Different techniques balance speed, cost, and response quality.</div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Context Documents</label>
                <div class="slider-container">
                    <input type="range" id="k-parameter" class="slider" min="3" max="15" value="10">
                    <div class="slider-value" id="k-value">10</div>
                </div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Diversity</label>
                <div class="slider-container">
                    <input type="range" id="diversity-parameter" class="slider" min="0" max="1" step="0.1" value="0.3">
                    <div class="slider-value" id="diversity-value">0.3</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Loading screen
        setTimeout(() => {
            document.getElementById('loading-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
            }, 600);
        }, 2000);

        // Settings functionality
        const settingsBtn = document.getElementById('settings-btn');
        const settingsSidebar = document.getElementById('settings-sidebar');
        const closeSettings = document.getElementById('close-settings');

        settingsBtn.addEventListener('click', () => {
            settingsSidebar.classList.add('open');
        });

        closeSettings.addEventListener('click', () => {
            settingsSidebar.classList.remove('open');
        });

        // Close settings when clicking outside
        document.addEventListener('click', (e) => {
            if (!settingsSidebar.contains(e.target) && !settingsBtn.contains(e.target)) {
                settingsSidebar.classList.remove('open');
            }
        });

        // Reading style tabs
        document.querySelectorAll('.style-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.style-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });

        // Model selection and reasoning effort
        const modelSelect = document.getElementById('model-select');
        const reasoningEffortGroup = document.getElementById('reasoning-effort-group');

        modelSelect.addEventListener('change', (e) => {
            if (e.target.value === 'o3-mini') {
                reasoningEffortGroup.classList.add('visible');
            } else {
                reasoningEffortGroup.classList.remove('visible');
            }
        });

        // Slider updates
        document.getElementById('k-parameter').addEventListener('input', (e) => {
            document.getElementById('k-value').textContent = e.target.value;
        });

        document.getElementById('diversity-parameter').addEventListener('input', (e) => {
            document.getElementById('diversity-value').textContent = e.target.value;
        });

        // Message functionality
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const messagesArea = document.getElementById('messages-area');

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Send message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Remove welcome message
            const welcome = messagesArea.querySelector('.welcome-message');
            if (welcome) welcome.remove();

            // Add user message
            addMessage(message, 'user');
            messageInput.value = '';
            messageInput.style.height = 'auto';

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                addMessage('Om! Your question touches the heart of spiritual wisdom. The ancient texts guide us toward understanding that true peace comes from within, through the practice of mindfulness and surrender to the divine flow of life.', 'bot');
            }, 2000);
        }

        sendButton.addEventListener('click', sendMessage);

        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;

            const avatar = document.createElement('div');
            avatar.className = `avatar ${sender}-avatar`;
            avatar.textContent = sender === 'user' ? 'Y' : 'üïâÔ∏è';

            const content = document.createElement('div');
            content.className = 'message-content';
            
            if (sender === 'bot' && text.startsWith('Om!')) {
                content.innerHTML = `<span class="om-greeting">Om!</span>${text.substring(3)}`;
            } else {
                content.textContent = text;
            }

            const time = document.createElement('div');
            time.className = 'message-time';
            time.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            content.appendChild(time);

            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';

            const avatar = document.createElement('div');
            avatar.className = 'avatar bot-avatar';
            avatar.textContent = 'üïâÔ∏è';

            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

            typingDiv.appendChild(avatar);
            typingDiv.appendChild(indicator);
            messagesArea.appendChild(typingDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function hideTypingIndicator() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }
    </script>
</body>
</html>
